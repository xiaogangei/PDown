<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.80.0">
  <title>文件离线下载</title>

  <!-- Bootstrap core CSS -->
  <link href="/static/css/bootstrap.min.css" rel="stylesheet">

  <!-- Favicons -->
  <link rel="apple-touch-icon" href="/static/img/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" href="/static/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/static/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="manifest" href="/static/img/favicons/manifest.json">
  <link rel="mask-icon" href="/static/img/favicons/safari-pinned-tab.svg" color="#563d7c">
  <link rel="icon" href="/static/img/favicons/favicon.ico">
  <meta name="msapplication-config" content=/static/img/favicons/browserconfig.xml"> <meta name="theme-color"
    content="#563d7c">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>


  <!-- Custom styles for this template -->
  <link href="/static/css/index.css" rel="stylesheet">
</head>

<body>
  <main role="main" class="container">
        <!----------------------------- 菜单栏--开始----------------------------------------->
        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
          <a class="navbar-brand" href="/">离线下载</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
            aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        
          <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item ">
                <a class="nav-link" href="/">添加 <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/downloading">下载中</a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="/downComplete">已完成</a>
              </li>
            </ul>
          </div>
        </nav>
        <!----------------------------- 菜单栏--结束----------------------------------------->
    <h1 class="sub-title">文件离线下载</h1>
    <p class="sub-desc">在将文件下载到服务器端！</p>

    <div class="row">
      <div class="col-sm-10">
        <input class="form-control " placeholder="请输入下载地址" type="text" id="down-url">
      </div>
      <div class="col-sm-2">
        <button id="down-btn" type="submit" class="btn btn-primary ">下载</button>
      </div>
    </div>

    <!----------------------------- 页脚--开始----------------------------------------->
    <footer class="my-5 pt-5 text-muted text-center text-small">
      <p class="mb-1">© 2017-2021 Company Name</p>
    </footer>
    <!----------------------------- 页脚--结束----------------------------------------->
  </main><!-- /.container -->

  <script src="/static/js/jquery-3.5.1.min.js"></script>
  <script>
    window.jQuery || document.write('<script src="/static/js/jquery.slim.min.js"><\/script>')
  </script>
  <script src="/static/js/bootstrap.bundle.min.js"></script>
  <script>
    var serverUrl = "/download?url=" 
    $("#down-btn").click(function (event) {
      event.stopPropagation()
      var url = $("#down-url").val();
      if (url != "") {
        $.get(serverUrl.concat(url), function (data, status) {
           var res=JSON.parse(data);
           if (res.code == 200) {
              window.location.href="/downloading";
           }

        })
      }else{
          alert("请输入要下载的文件地址！")
      }

    });
  </script>

</body>

</html>